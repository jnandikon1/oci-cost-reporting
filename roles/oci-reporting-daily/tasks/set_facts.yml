---
- name: Enforce DAILY cadence
  set_fact:
    report_period: "DAILY"

- name: Set report window
  set_fact:
    report_start_ts: "{{ (ansible_date_time.date | to_datetime('%Y-%m-%d') - report_day_offset * 86400) | to_datetime }}"
    report_end_ts: "{{ ansible_date_time.date | to_datetime('%Y-%m-%d') }}"

- name: Set target ADW table
  set_fact:
    adw_target_table: "{{ target_table }}"

- name: Create runtime directories
  file:
    path: "{{ item }}"
    state: directory
    mode: '0755'
  loop:
    - "{{ data_dir }}"
    - "{{ reports_dir }}"
    - "{{ logs_dir }}"
