---
# Centralize all facts and variables for email notification stage

- name: Set email notification status - initialized
  set_fact:
    email_notification_status: "IN_PROGRESS"
    email_notification_start_timestamp: "{{ ansible_date_time.iso8601 }}"
  tags:
    - email-notification

- name: Set initial email variables
  set_fact:
    email_message_body: ""
    email_attachments: []
    attachment_count: 0
    recipients_count: 0
  tags:
    - email-notification

- name: Display email notification initialization
  debug:
    msg: |
      âœ“ Email Notification Initialized:
        Status: {{ email_notification_status }}
        Start Time: {{ email_notification_start_timestamp }}
        Configured Recipients: {{ email_recipients | length }}
        Subject: {{ email_subject }}
  tags:
    - email-notification
